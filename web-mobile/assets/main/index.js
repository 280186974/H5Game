System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameSet.ts"],(function(e){"use strict";var t,n,i,o,r,a,u,c,l,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.AudioSourceComponent,c=e.AudioClip,l=e.game,s=e.Component},function(e){p=e.GameSet}],execute:function(){var d,f,g,y,b,h,m,v,A;r._RF.push({},"6c1f0WJza9Bx48khtOPacw5","AudioManager",void 0);var S=a.ccclass,z=a.property;e("AudioManager",(d=S("AudioManager"),f=z(u),g=z(c),y=z(c),d((m=t((h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"audio",m,o(t)),i(t,"merge",v,o(t)),i(t,"button",A,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){l.addPersistRootNode(this.node),p.getInstance().audioManager=this},r.playSound=function(e){p.getInstance().gameSetData.sound&&this.audio.playOneShot(e)},t}(s)).prototype,"audio",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(h.prototype,"merge",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(h.prototype,"button",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockSlot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WarUnit.ts","./GameSet.ts"],(function(e){"use strict";var t,a,n,i,o,r,l,c,s,g,u,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,c=e.instantiate,s=e.Component},function(e){g=e.WarUnit},function(e){u=e.GameSet,S=e.BlockState}],execute:function(){var h,d,f,p,v,w,N,m,b,k,M,C,y;o._RF.push({},"22feaQg5fVElaoTC+L5gsUj","BlockSlot",void 0);var B=r.ccclass,T=r.property;e("BlockSlot",(h=B("BlockSlot"),d=T(Number),f=T(l),p=T(l),v=T(l),w=T(l),h((b=t((m=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"index",b,i(t)),n(t,"CanSetNode",k,i(t)),n(t,"CanMergeNode",M,i(t)),n(t,"LastNode",C,i(t)),n(t,"TargetNode",y,i(t)),t.nowTarget=null,t}a(t,e);var o=t.prototype;return o.SetConfig=function(e){var t=u.getInstance().gameManager.allWarUnit.find((function(t){return t.kind==e.kind})).allBody[e.level],a=c(t);a.setParent(u.getInstance().gameManager.rootNode),this.nowTarget=a.getComponent(g),this.nowTarget.setBlock(this)},o.SetWarUnit=function(e){this.nowTarget=e},o.SetState=function(e){switch(e){case S.default:this.CanSetNode.active=!1,this.CanMergeNode.active=!1,this.LastNode.active=!1;break;case S.canSet:this.CanSetNode.active=!0,this.CanMergeNode.active=!1,this.LastNode.active=!1;break;case S.canMerge:this.CanSetNode.active=!1,this.CanMergeNode.active=!0,this.LastNode.active=!1;break;case S.lastBlock:this.CanSetNode.active=!1,this.CanMergeNode.active=!1,this.LastNode.active=!0}},o.update=function(){u.getInstance().gameManager.touchIsOn?null!=u.getInstance().gameManager.selectBlock?u.getInstance().gameManager.selectBlock==this?null==this.nowTarget?this.SetState(S.canSet):u.getInstance().gameManager.nowSelect==this.nowTarget?this.SetState(S.lastBlock):u.getInstance().gameManager.nowSelect.levelData.kind==this.nowTarget.levelData.kind&&u.getInstance().gameManager.nowSelect.levelData.level==this.nowTarget.levelData.level?this.SetState(S.canMerge):this.SetState(S.canSet):u.getInstance().gameManager.nowSelect==this.nowTarget?this.SetState(S.lastBlock):this.SetState(S.default):null!=u.getInstance().gameManager.nowSelect&&u.getInstance().gameManager.nowSelect==this.nowTarget?this.SetState(S.lastBlock):this.SetState(S.default):this.SetState(S.default)},t}(s)).prototype,"index",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(m.prototype,"CanSetNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(m.prototype,"CanMergeNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"LastNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"TargetNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=m))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameSet.ts","./BlockSlot.ts"],(function(e){"use strict";var t,n,o,l,a,i,c,r,s,u,f,d,g,S,y,k,p,h,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,c=e.Camera,r=e.Node,s=e.Collider,u=e.Prefab,f=e.PhysicsSystem,d=e.geometry,g=e.instantiate,S=e.Component},function(e){y=e.WarUnitConfig,k=e.GameSet,p=e.LevelData,h=e.WarUnitKind},function(e){w=e.BlockSlot}],execute:function(){var B,m,v,b,P,C,I,W,U,M,T,E,_,O,N,R,z,D,J;a._RF.push({},"186e1Qc4AJCAZ2d5TxY8FmU","GameManager",void 0);var L=i.ccclass,G=i.property;e("GameManager",(B=L("GameManager"),m=G(y),v=G(w),b=G(c),P=G(r),C=G(s),I=G(r),W=G(u),U=G(u),B((E=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,o(t,"allWarUnit",E,l(t)),o(t,"allBlock",_,l(t)),o(t,"mainCam",O,l(t)),o(t,"touchUI",N,l(t)),o(t,"plane",R,l(t)),o(t,"rootNode",z,l(t)),o(t,"Eff",D,l(t)),o(t,"JumpEff",J,l(t)),t.selectBlock=null,t.nowSelect=null,t.touchIsOn=!1,t._ray=new d.Ray,t._ray2=new d.Ray,t._ray3=new d.Ray,t}n(t,e);var a=t.prototype;return a.onLoad=function(){k.getInstance().gameManager=this,k.getInstance().SetGameConfig(),this.touchEvent(),this.SetNowState()},a.SetNowState=function(){var e=new p;e.kind=h.Near,e.level=0,this.allBlock[0].SetConfig(e),this.allBlock[1].SetConfig(e),this.allBlock[2].SetConfig(e),this.allBlock[3].SetConfig(e),this.allBlock[4].SetConfig(e),this.allBlock[5].SetConfig(e),this.allBlock[6].SetConfig(e),this.allBlock[7].SetConfig(e),this.allBlock[8].SetConfig(e),this.allBlock[9].SetConfig(e);var t=new p;t.kind=h.Far,t.level=0,this.allBlock[10].SetConfig(t),this.allBlock[11].SetConfig(t),this.allBlock[12].SetConfig(t),this.allBlock[13].SetConfig(t),this.allBlock[14].SetConfig(t)},a.touchEvent=function(){var e=this;this.touchUI.on(r.EventType.TOUCH_START,(function(t){if(e.mainCam.screenPointToRay(t.getLocation().x,t.getLocation().y,e._ray),f.instance.raycast(e._ray)){var n=f.instance.raycastResults.find((function(e){return"Block"==e.collider.node.name}));if(null!=n){var o=n.collider.getComponent(w).nowTarget;null!=o&&(e.nowSelect=o,o.setSelect(!0))}}e.touchIsOn=!0})),this.touchUI.on(r.EventType.TOUCH_MOVE,(function(t){if(e.mainCam.screenPointToRay(t.getLocation().x,t.getLocation().y,e._ray2),f.instance.raycast(e._ray2)){var n=f.instance.raycastResults.find((function(e){return"rayPlane"==e.collider.node.name}));if(null!=n&&null!=e.nowSelect){e.nowSelect.node.setWorldPosition(n.hitPoint);var o=e.nowSelect.node.worldPosition;if(e._ray3=d.Ray.create(o.x,o.y+3,o.z,0,-6,0),f.instance.raycast(e._ray3)){var l=f.instance.raycastResults.find((function(e){return"Block"==e.collider.node.name}));e.selectBlock=null!=l?l.collider.getComponent(w):null}}}e.touchIsOn=!0})),this.touchUI.on(r.EventType.TOUCH_END,(function(t){if(null==e.selectBlock)null!=e.nowSelect&&(k.getInstance().audioManager.playSound(k.getInstance().audioManager.button),e.nowSelect.setPos(),e.nowSelect.setSelect(!1),(s=g(e.JumpEff)).setParent(e.rootNode),s.setWorldPosition(e.nowSelect.blockSlot.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1));else if(null!=e.nowSelect)if(null==e.selectBlock.nowTarget)k.getInstance().audioManager.playSound(k.getInstance().audioManager.button),e.nowSelect.setBlock(e.selectBlock),e.selectBlock.SetWarUnit(e.nowSelect),e.nowSelect.setSelect(!1),(s=g(e.JumpEff)).setParent(e.rootNode),s.setWorldPosition(e.selectBlock.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1);else if(e.selectBlock.nowTarget==e.nowSelect){k.getInstance().audioManager.playSound(k.getInstance().audioManager.button),e.nowSelect.setPos(),e.nowSelect.setSelect(!1),(s=g(e.JumpEff)).setParent(e.rootNode),s.setWorldPosition(e.selectBlock.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1)}else{var n=e.nowSelect.levelData,o=e.selectBlock.nowTarget.levelData;if(!(n.level<k.getInstance().gameManager.allWarUnit.find((function(e){return e.kind==n.kind})).allBody.length-1)){var l=e.nowSelect,a=e.nowSelect.blockSlot,i=e.selectBlock.nowTarget,c=e.selectBlock;l.setBlock(c),c.SetWarUnit(l),l.setPos(),l.setSelect(!1),i.setBlock(a,!1),a.SetWarUnit(i),i.setPos(),(s=g(e.JumpEff)).setParent(e.rootNode),s.setWorldPosition(c.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1),k.getInstance().audioManager.playSound(k.getInstance().audioManager.button)}else if(n.kind==o.kind&&n.level==o.level){l=e.nowSelect,a=e.nowSelect.blockSlot,i=e.selectBlock.nowTarget,c=e.selectBlock;a.SetWarUnit(null),c.SetWarUnit(null),l.node.destroy(),i.node.destroy();var r=new p;r.kind=i.levelData.kind,r.level=i.levelData.level+1,c.SetConfig(r),(s=g(e.Eff)).setParent(e.rootNode),s.setWorldPosition(c.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1),k.getInstance().audioManager.playSound(k.getInstance().audioManager.merge)}else{var s;l=e.nowSelect,a=e.nowSelect.blockSlot,i=e.selectBlock.nowTarget,c=e.selectBlock;l.setBlock(c),c.SetWarUnit(l),l.setPos(),l.setSelect(!1),i.setBlock(a,!1),a.SetWarUnit(i),i.setPos(),(s=g(e.JumpEff)).setParent(e.rootNode),s.setWorldPosition(c.node.getWorldPosition()),e.scheduleOnce((function(){s.destroy()}),1),k.getInstance().audioManager.playSound(k.getInstance().audioManager.button)}}e.nowSelect=null,e.selectBlock=null,e.touchIsOn=!1}))},t}(S)).prototype,"allWarUnit",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(T.prototype,"allBlock",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(T.prototype,"mainCam",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(T.prototype,"touchUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(T.prototype,"plane",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"rootNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"Eff",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(T.prototype,"JumpEff",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=T))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameSet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,a,i,r,o,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,a=e.inheritsLoose},function(e){i=e.cclegacy,r=e._decorator,o=e.Enum,l=e.Prefab,u=e.Component}],execute:function(){var c,s,f,p,d,g,m,h,y,b,v,S,_,k,D,w;e({BlockState:void 0,WarUnitKind:void 0}),i._RF.push({},"94240YX3htMm6elZ2/dyqHu","GameSet",void 0);var B,F,G=r.ccclass,M=r.property;!function(e){e[e.Far=0]="Far",e[e.Near=1]="Near"}(B||(B=e("WarUnitKind",{}))),o(B),function(e){e[e.default=0]="default",e[e.lastBlock=1]="lastBlock",e[e.canSet=2]="canSet",e[e.canMerge=3]="canMerge"}(F||(F=e("BlockState",{}))),o(F);var z=e("GameSetData",(function(){this.sound=void 0}));e("WarUnitConfig",(c=G("WarUnitConfig"),s=M({type:B}),f=M(l),c((g=t((d=function(){n(this,"kind",g,this),n(this,"allBody",m,this)}).prototype,"kind",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.Far}}),m=t(d.prototype,"allBody",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=d))||p)),e("LevelData",(h=G("LevelData"),y=M({type:B}),b=M(Number),h((_=t((S=function(){n(this,"kind",_,this),n(this,"level",k,this)}).prototype,"kind",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.Far}}),k=t(S.prototype,"level",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=S))||v)),e("GameSet",G("GameSet")(((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).gameSetData=null,t.gameManager=null,t.audioManager=null,t}return a(t,e),t.getInstance=function(){return t.__instance||(t.__instance=new t),t.__instance},t.prototype.SetGameConfig=function(){this.gameSetData=new z,this.gameSetData.sound=!0},t}(u)).__instance=null,D=w))||D);i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./BlockSlot.ts","./GameManager.ts","./GameSet.ts","./WarUnit.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/WarUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameSet.ts"],(function(t){"use strict";var e,i,n,o,r,l,a,s,c,u,p,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Node,s=t.animation,c=t.tween,u=t.Vec3,p=t.Component},function(t){b=t.LevelData}],execute:function(){var h,f,y,d,g,v,w,S,k;r._RF.push({},"f8b3aFja0hAPZ1Z9WVKLVnQ","WarUnit",void 0);var m=l.ccclass,P=l.property;t("WarUnit",(h=m("WarUnit"),f=P(b),y=P(a),d=P(s.AnimationController),h((w=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"levelData",w,o(e)),n(e,"body",S,o(e)),n(e,"ani",k,o(e)),e.blockSlot=null,e}i(e,t);var r=e.prototype;return r.start=function(){this.ani.setValue("Victory",!0)},r.setBlock=function(t,e){void 0===e&&(e=!0),null==this.blockSlot?(this.blockSlot=t,this.setPos()):(e&&(this.blockSlot.nowTarget=null),this.blockSlot=t,this.setPos())},r.setPos=function(){this.node.setWorldPosition(this.blockSlot.TargetNode.getWorldPosition())},r.setSelect=function(t){t?(c().target(this.body).to(.1,{position:new u(0,2,0)}).start(),this.ani.setValue("Fail",!0)):(c().target(this.body).to(.1,{position:new u(0,0,0)}).start(),this.ani.setValue("Fail",!1))},e}(p)).prototype,"levelData",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),S=e(v.prototype,"body",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"ani",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});